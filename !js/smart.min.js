function initFormControl(t){t.find("input[type=text],input[type=email],input[type=password],select,textarea").addClass("form-control"),t.find("input[type=submit]").addClass("btn btn-primary")}function initDialogHendler(t,n){var e=t.find(".content");e.prepend('<a href="#" class="dialog-close">&times;</a>'),e.find("form").submit(function(){return postDialogForm(t,$(this),n),!1}),e.find("a").click(function(){return"#"!=$(this).attr("href")?$(this).closest(".wa-auth-adapters").length?($(".dialog:visible").hide().find(".cart").empty(),!1):(loadDialogContent(t,$(this).attr("href")),!1):void 0})}function postDialogForm(t,n,e){var a=t.find(".content");a.html('<i class="icon32 loading"><i>'),$.post(e,n.serializeArray(),function(n){$(n).find(".wa-value .wa-error-msg").length?(a.html($(n).find("#content >")),initDialogHendler(t,e)):window.location.href=e})}function loadDialogContent(t,n){var e=t.find(".content");e.html('<i class="icon32 loading"><i>'),e.load(n+" #content >",function(){initDialogHendler(t,n),initFormControl(t)}),t.show()}$("[data-toggle='tooltip']").tooltip({container:"body"}),$(".dialog").on("click","a.dialog-close",function(){return $(this).closest(".dialog").hide().find(".content").empty(),$("html").removeClass("dialog-open"),!1}),$(document).ready(function(){initFormControl($("#content")),$("#cart").on("click",".remove",function(){var t=$(this).closest("tr");return $.post(cart_url+"delete/",{id:t.data("id"),html:1},function(n){"ok"==n.status&&(t.remove(),$("#cart-total").html(n.data.total),n.data.count||($("#cart .cart-empty").show(),$("#cart .cart-buttons").hide(),$("#cart .cart-items").hide()))},"json"),!1}),$(document).on("click",".modal-dialog-url",function(){var t=$(this).attr("href");if(t){var n=$("#dialog");return loadDialogContent(n,t),$("html").addClass("dialog-open"),!1}return!1})}),jQuery(function(t){t(document).ready(function(){return is_autocomplete?void(t("#filter_name").autocomplete({delay:500,minLength:3,source:function(n,e){n.term=n.term.replace(/^\s+|\s+$/g,"");var a=n.term.replace(/\s+/g,"+");t.ajax({url:shop_search_url+"?query="+encodeURIComponent(a),type:"GET",dataType:"html",success:function(n){var o=t("<div></div>").append(n),i=t.map(o.find(".products-category .product-layout:lt(5) .ajax_product_info"),function(n){return{label:t(n).data("name"),value:t(n).data("name"),url:t(n).data("url"),text:'<div><img src="'+t(n).data("img")+'" /><span class="item-name">'+t(n).data("name")+'</span><span class="item-price">'+t(n).data("price")+"</span></div>"}});o.find(".products-category .product-layout").length>5&&(i[i.length]={label:""+a,value:""+a,url:shop_search_url+"?query="+encodeURIComponent(a),text:show_all_text}),e(i)}})},select:function(t,n){location.href=n.item.url}}).data("autocomplete")._renderMenu=function(n,e){t.each(e,function(e,a){t("<li></li>").data("item.autocomplete",a).append('<a href="'+a.url+'">'+a.text+"</a>").appendTo(n)})}):!1})});